<!doctype html>
<html class="no-js">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Amaze UI Admin index Examples</title>
    <meta name="description" content="这是一个 index 页面">
    <meta name="keywords" content="index">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <link rel="icon" type="image/png" href="assets/i/favicon.png">
    <link rel="apple-touch-icon-precomposed" href="assets/i/app-icon72x72@2x.png">
    <meta name="apple-mobile-web-app-title" content="Amaze UI" />
    <link rel="stylesheet" href="assets/css/amazeui.min.css"/>
    <link rel="stylesheet" href="assets/css/admin.css">
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/app.js"></script>


    <link rel="stylesheet" type="text/css" href="assets/css/jquery.dataTables.css">


</head>

<!--[if lte IE 9]><p class="browsehappy">升级你的浏览器吧！ <a href="http://se.360.cn/" target="_blank">升级浏览器</a>以获得更好的体验！</p><![endif]-->

</head>

<body>
<header class="am-topbar admin-header">
    <div class="am-topbar-brand"><img src="assets/i/logo.png"></div>

    <div class="am-collapse am-topbar-collapse" id="topbar-collapse">
        <ul class="am-nav am-nav-pills am-topbar-nav admin-header-list">

            <li class="am-dropdown tognzhi" data-am-dropdown>
                <button class="am-btn am-btn-primary am-dropdown-toggle am-btn-xs am-radius am-icon-bell-o" data-am-dropdown-toggle> 消息管理<span class="am-badge am-badge-danger am-round">6</span></button>
                <ul class="am-dropdown-content">
                    <li class="am-dropdown-header">所有消息都在这里</li>
                    <li><a href="#">未激活会员 <span class="am-badge am-badge-danger am-round">556</span></a></li>
                    <li><a href="#">未激活代理 <span class="am-badge am-badge-danger am-round">69</span></a></a></li>
                    <li><a href="#">未处理汇款</a></li>
                    <li><a href="#">未发放提现</a></li>
                    <li><a href="#">未发货订单</a></li>
                    <li><a href="#">低库存产品</a></li>
                    <li><a href="#">信息反馈</a></li>
                </ul>
            </li>
            <li class="kuanjie">
                <a href="#">订单管理</a>
                <a href="#">商品管理</a>
                <a href="#">个人中心</a>
            </li>
            <li class="soso">
                <p>
                </p>
            </li>
        </ul>
    </div>
</header>

<div class="am-cf admin-main">

    <div class="nav-navicon admin-main admin-sidebar">


        <div class="sideMenu am-icon-dashboard" style="color:#aeb2b7; margin: 10px 0 0 0;"> 欢迎系统管理员：清风抚雪</div>
        <div class="sideMenu">
            <h3 class="am-icon-flag"><em></em> <a href="#">商品管理</a></h3>
            <ul>
                <li><a href="goodsList.html">商品列表</a></li>
                <li ><a href="addGoods.html">添加新商品</a></li>
                <li><a href="categoryList.html">商品类别</a></li>
                <li ><a href="addCategory.html">添加新商品类别</a></li>
            </ul>
            <h3 class="am-icon-cart-plus on"><em></em> <a href="#"> 订单管理</a></h3>
            <ul>
                <li><a href="OrderList.html">订单列表</a></li>

            </ul>
            <h3 class="am-icon-users"><em></em> <a href="sellerInfo.html">个人中心</a></h3>
            <ul>
                <li><a href="sellerInfo.html">修改信息</a></li>
            </ul>

        </div>
        <!-- sideMenu End -->

        <script type="text/javascript">
            jQuery(".sideMenu").slide({
                titCell:"h3", //鼠标触发对象
                targetCell:"ul", //与titCell一一对应，第n个titCell控制第n个targetCell的显示隐藏
                effect:"slideDown", //targetCell下拉效果
                delayTime:300 , //效果时间
                triggerTime:150, //鼠标延迟触发时间（默认150）
                defaultPlay:true,//默认是否执行效果（默认true）
                returnDefault:true //鼠标从.sideMen移走后返回默认状态（默认false）
            });
        </script>
    </div>





    <div class=" admin-content">

        <div class="daohang">
            <ul>
            </ul>
        </div>
        <div class="am-popup am-popup-inner" id="my-popup"></div>
        <div class="admin-biaogelist">

            <div class="listbiaoti am-cf">
                <ul class="am-icon-flag on"> 订单列表</ul>

                <dl class="am-icon-home" style="float: right;">当前位置： 首页 > <a href="#">订单列表</a></dl>


                <!--这里打开的是新页面-->

            </div>

            <div class="am-btn-toolbars am-btn-toolbar am-kg am-cf">
                <ul>

                    <li style="margin-right: 0;">
                        <span class="tubiao am-icon-calendar"></span>
                        <input type="text" class="am-form-field am-input-sm am-input-zm  am-icon-calendar" placeholder="开始创建日期" data-am-datepicker="{theme: 'success',}" readonly="" id="startTime" >
                    </li>
                    <li style="margin-left: -4px;">
                        <span class="tubiao am-icon-calendar"></span>
                        <input type="text" class="am-form-field am-input-sm am-input-zm  am-icon-calendar" placeholder="结束创建日期" data-am-datepicker="{theme: 'success',}" readonly="" id="endTime" >
                    </li>

                    <li style="margin-right: 0;">
                        <span class="tubiao am-icon-calendar"></span>
                        <input type="text" class="am-form-field am-input-sm am-input-zm  am-icon-calendar" placeholder="开始修改日期" data-am-datepicker="{theme: 'success',}" readonly="" id="changeStartTime" >
                    </li>
                    <li style="margin-left: -4px;">
                        <span class="tubiao am-icon-calendar"></span>
                        <input type="text" class="am-form-field am-input-sm am-input-zm  am-icon-calendar" placeholder="结束修改日期" data-am-datepicker="{theme: 'success',}" readonly="" id="changeEndTime" >
                    </li>

                    <li style="margin-left: -10px;">
                        <div class="am-btn-group am-btn-group-xs">
                            <select data-am-selected="{btnWidth: 90, btnSize: 'sm', btnStyle: 'default'}" style="display: none;" id="o_status">
                                <option value="">完成情况</option>
                                <option value="1">已完成</option>
                                <option value="0">未完成</option>
                            </select>
                        </div>
                    </li>

                    <li><input type="text" class="am-form-field am-input-sm am-input-xm" placeholder="关键词搜索" id="str"></li>
                    <li><button type="button" class="am-btn am-radius am-btn-xs am-btn-success" style="margin-top: -1px;"  onclick="searchOrderInfo()">搜索</button></li>

                    <a type="button" class="am-btn am-btn-danger am-round am-btn-xs "  onclick="deleteCheckOrder()" > 批量删除</a>

                </ul>

            </div>



            <div class="am-form am-g">
                <table width="100%" id = "table" class="am-table am-table-bordered am-table-radius am-table-striped am-table-hover">
                    <thead>
                    <tr class="am-success">
                        <th class="table-check"><input type="checkbox"  id="all" /></th>
                        <th class="table-id">订单ID</th>
                        <th class="table-date am-hide-sm-only" data-options="field:'validityDate',formatter:function(data){
return format(data,'yyyy-MM-dd HH:mm:ss');
}">创建日期</th>
                        <th class="table-date am-hide-sm-only" data-options="field:'validityDate',formatter:function(data){
return format(data,'yyyy-MM-dd HH:mm:ss');
}">修改日期</th>
                        <th class="table-type">快递公司</th>
                        <th class="table-type">支付方式</th>
                        <th class="table-type">支付金额</th>
                        <th class="table-type">下单人ID</th>
                        <th class="table-type">收货人</th>
                        <th class="table-type">手机电话</th>
                        <th class="table-type">详细地址</th>
                        <th class="table-type">省</th>
                        <th class="table-type">市</th>
                        <th class="table-type">区</th>
                        <th class="table-author am-hide-sm-only">完成/未完成 <i class="am-icon-check am-text-warning"></i> <i class="am-icon-close am-text-primary"></i></th>
                        <th width="140px" class="table-set">操作</th>
                    </tr>
                    </thead>
                    <tbody id="dataTable">
                    </tbody>
                </table>
            </div>
            <div class="foods">
                <ul>
                </ul>
                <dl>
                    <a href="" title="返回头部" class="am-icon-btn am-icon-arrow-up"></a>
                </dl>
            </div>
        </div>

    </div>




</div>

<!--[if lt IE 9]>
<script src="http://libs.baidu.com/jquery/1.11.1/jquery.min.js"></script>
<script src="http://cdn.staticfile.org/modernizr/2.8.3/modernizr.js"></script>
<script src="assets/js/polyfill/rem.min.js"></script>
<script src="assets/js/polyfill/respond.min.js"></script>
<script src="assets/js/amazeui.legacy.js"></script>
<![endif]-->

<script src="assets/js/amazeui.min.js"></script>
<!--<![endif]-->
<!-- jQuery -->
<!--<script type="text/javascript" charset="utf8" src="assets/js/jquery-1.10.2.min.js"></script>-->
<!-- DataTables -->
<script type="text/javascript" charset="utf8" src="assets/js/jquery.dataTables.js"></script>
<!--[if (gte IE 9)|!(IE)]><!-->
<script type="text/javascript">

    function getAllOrderInfo() {
        $.ajax({
            type :"POST",
            url :"getAllOrder",
            contentType : "application/json",
            success : function (data) {
                var tabObj = $("#dataTable");
                $(data).each(function (i,item) {
                    var trHtml ="<tr>"+
                        "<td><input type=\"checkbox\"    value="+item.id+"></td>"+
                        "<td>"+item.id+"</td>"+
                        "<td>"+item.o_orderdate+"</td>"+
                        "<td>"+item.o_checkdate+"</td>"+
                        "<td>"+item.o_sendtype+"</td>"+
                        "<td>"+item.o_paytype+"</td>"+
                        "<td>"+item.o_paycount+"</td>"+
                        "<td>"+item.userId+"</td>"+
                        "<td>"+item.o_shperson+"</td>"+
                        "<td>"+item.o_shphone+"</td>"+
                        "<td>"+item.o_shaddress+"</td>"+
                        "<td>"+item.o_province+"</td>"+
                        "<td>"+item.o_city+"</td>"+
                        "<td>"+item.o_district+"</td>"
                    if(item.o_status==1){
                        trHtml += "<td class=\"am-hide-sm-only\"><i class=\"am-icon-check am-text-warning\"></i></td>\n"
                    }else {
                        trHtml += "<td class=\"am-hide-sm-only\"><i class=\"am-icon-close am-text-primary\"></i></td>\n"
                    }
                    trHtml +="<td>"+
                        " <button type=\"button\" class=\"am-btn am-btn-default am-btn-xs am-text-success am-round\"   onclick=\"jumpToDetail("+item.id+")\"><span class=\"am-icon-search\" title=\"查看订单详情\"></span> </button>" +
                        "<button type=\"button\" class=\"am-btn am-btn-default am-btn-xs am-text-secondary am-round\" onclick=\"jumpToChange("+item.id+")\"><span class=\"am-icon-pencil-square-o\"></span></button>\n" +
                        "<button type=\"button\" class=\"am-btn am-btn-default am-btn-xs am-text-danger am-round\" onclick=\"jumpToDelete("+item.id+")\"><span class=\"am-icon-trash-o\"></span></button>"+
                        "</td>"+
                        "</tr>";
                    //console.log(trHtml); //  2pm
                    //将字符串添加到table中
                    tabObj.append(trHtml);
                });
                $("#table").DataTable({
                    "paging":true,
                    "info":true,
                    "lengthChange":false,
                    "ordering":false,
                    "processing": true,
                    "searching": false,
                    "deferRender": true,
                    "language": {
                        "sProcessing": "处理中...",
                        "sLengthMenu": "显示 _MENU_ 项结果",
                        "sZeroRecords": "没有匹配结果",
                        "sInfo": "显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项",
                        "sInfoEmpty": "显示第 0 至 0 项结果，共 0 项",
                        "sInfoFiltered": "(由 _MAX_ 项结果过滤)",
                        "sInfoPostFix": "",
                        "sSearch": "搜索:",
                        "sUrl": "",
                        "sEmptyTable": "表中数据为空",
                        "sLoadingRecords": "载入中...",
                        "sInfoThousands": ",",
                        "oPaginate": {
                            "sFirst": "首页",
                            "sPrevious": "上页",
                            "sNext": "下页",
                            "sLast": "末页"
                        },
                    }
                });

            },
            error:function (data) {
                alert("执行失败")
            }
        });
    }
    //调用方法
    getAllOrderInfo();

    // 跳转详情页面
    function jumpToDetail(id) {
        var url = "OrderDetailList.html?id="+id;
        window.location.href = url;
    }
    // 跳转修改页面
    function jumpToChange(id) {
        var url = "ChangeOrder.html?id="+id;
        window.location.href = url;
    }
    // 删除订单信息
    function jumpToDelete(id) {
        alert(id)
        $.ajax({
            type: "POST",
            url:"deleteOrderInfo?id="+id,
            contentType:"application/json",
            success: function (data) {
                window.location.href = "OrderList.html"
            },
            error: function (data) {
            },
            dataType: "json"
        });
    }

    //订单条件查询
    function searchOrderInfo() {
        $("#dataTable").empty();
        var startTime=$("#startTime").val();
        var endTime=$("#endTime").val();
        var str=$("#str").val();
        var changeStartTime = $("#changeStartTime").val();
        var changeEndTime =$("#changeEndTime").val();
        var o_status=$("#o_status").val();
        $.ajax({
            type :"POST",
            url :"selectOrderBy",
            data:JSON.stringify({
                "startTime": startTime,
                "endTime":endTime,
                "str" : str,
                "changeStartTime":changeStartTime,
                "changeEndTime":changeEndTime,
                "o_status":o_status
            }),
            contentType : "application/json",
            success : function (data) {
                var tabObj = $("#dataTable");
                $(data).each(function (i,item) {
                    var trHtml ="<tr>"+
                        "<td><input type=\"checkbox\" value="+item.id+"></td>"+
                        "<td>"+item.id+"</td>"+
                        "<td>"+item.o_orderdate+"</td>"+
                        "<td>"+item.o_checkdate+"</td>"+
                        "<td>"+item.o_sendtype+"</td>"+
                        "<td>"+item.o_paytype+"</td>"+
                        "<td>"+item.o_paycount+"</td>"+
                        "<td>"+item.userId+"</td>"+
                        "<td>"+item.o_shperson+"</td>"+
                        "<td>"+item.o_shphone+"</td>"+
                        "<td>"+item.o_shaddress+"</td>"+
                        "<td>"+item.o_province+"</td>"+
                        "<td>"+item.o_city+"</td>"+
                        "<td>"+item.o_district+"</td>"
                    if(item.o_status==1){
                        trHtml += "<td class=\"am-hide-sm-only\"><i class=\"am-icon-check am-text-warning\"></i></td>\n"
                    }else {
                        trHtml += "<td class=\"am-hide-sm-only\"><i class=\"am-icon-close am-text-primary\"></i></td>\n"
                    }
                    trHtml +="<td>"+
                        "<button type=\"button\" class=\"am-btn am-btn-default am-btn-xs am-text-success am-round\"   onclick=\"jumpToDetail("+item.id+")\"><span class=\"am-icon-search\" title=\"查看订单详情\"></span> </button>" +
                        "<button type=\"button\" class=\"am-btn am-btn-default am-btn-xs am-text-secondary am-round\" onclick=\"jumpToChange("+item.id+")\"><span class=\"am-icon-pencil-square-o\"></span></button>\n" +
                        "<button type=\"button\" class=\"am-btn am-btn-default am-btn-xs am-text-danger am-round\" onclick=\"jumpToDelete("+item.id+")\"><span class=\"am-icon-trash-o\"></span></button>"+
                        "</td>"+
                        "</tr>";
                    //console.log(trHtml); //  2pm
                    //将字符串添加到table中
                    tabObj.append(trHtml);

                });
            },
            error:function (data) {
                alert("执行失败")
            }
        });
    }
    // 全选反选
    $("#all").click(function(){

        var isCheck = $("#all").is(":checked"); //
        $("input[type='checkbox']").each(function () {
            this.checked = isCheck ;
        })
    });
    // 批量删除

    var selectUserId = new Array();

    function deleteCheckOrder() {
        $(":checkbox:checked").each(function (i) {
            if ($(this).val() != '') {
                selectUserId.push($(this).val())
            }
        });

        $.ajax({
            type: "POST",
            url: "deleteSelectOrder",
            contentType: "application/json",
            data: JSON.stringify(selectUserId),
            success: function (data) {

                window.location.href = "OrderList.html"

            },
            error: function (data) {
                window.location.reload();
            },
            dataType: "json"
        });
    }







</script>



</body>
</html>