<!DOCTYPE html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<html>
<head>
    <meta charset="utf-8">
    <title>MyShop——个人注册</title>
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="stylesheet" type="text/css" href="css/ziy.css">
    <!--	<script src="js/jquery-1.11.3.min.js" ></script>
    <script src="js/index.js" ></script>
     <script type="text/javascript" src="js/jquery1.42.min.js"></script>
    <script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>
     <script type="text/javascript" src="js/jquery.SuperSlide.2.1.1.source.js"></script>-->

</head>
<body>
<!--dengl-->
<div class="yiny">
    <div class="beij_center">
        <div class="dengl_logo">
            <img src="images/logo_1.png">
            <h1>欢迎注册</h1>
        </div>
    </div>
</div>
<div class="beij_center">
    <div class="ger_zhuc_beij">
        <div class="ger_zhuc_biaot">
            <ul>
                <li class="ger_border_color"><a href="zhuc.html">个人注册</a></li>
                <i>丨</i>
                <li><a href="shenq_ruz.html">申请入驻</a></li>
                <p>我已经注册，现在就<a class="ftx-05 ml10" href="login.html">登录</a></p>
            </ul>
        </div>
        <form class="zhuc_biaod" id="RegisterCheck" method="post" onsubmit="Register()">
            <div class="reg-items" >
              	<span class="reg-label">
                	<label for="userName">用户名：</label>
              	</span>
                <input   class="i-text" type="text" id="userName" name="userName">
                <!--备注————display使用 inline-block-->
                <div class="msg-box">
                    <div class="msg-box" style="display: none;">
                        <div class="msg-weak" style="display: inline-block;"> <i></i>
                            <div class="msg-cont">4-20个字符，支持汉字、字母、数字及“-”、“_”组合</div>
                        </div>
                    </div>
                    <div class="msg-weak err-tips"  style="display: none;"><div>请输入用户名</div></div>
                </div>
                <span class="suc-icon"></span>
            </div>
            <div class="reg-items" >
              	<span class="reg-label">
                	<label for="password">设置密码：</label>
              	</span>
                <input   class="i-text" type="password" id="password" name="password">
                <!--备注————display使用 inline-block-->
                <div class="msg-box">
                    <div class="msg-box" style="display: none;">
                        <div class="msg-weak" style="display: inline-block;"> <i></i>
                            <div class="msg-cont">键盘大写锁定已打开，请注意大小写!</div>
                        </div>
                    </div>
                    <div class="msg-weak err-tips"  style="display:none;"><div>请输入密码</div></div>
                </div>
            </div>
            <div class="reg-items" >
              	<span class="reg-label">
                	<label for="repassword">确认密码：</label>
              	</span>
                <input   class="i-text" type="password" id="repassword" name="repassword">
                <!--备注————display使用 inline-block-->
                <div class="msg-box">
                    <div class="msg-weak err-tips"  style="display: none;"><div>密码不一样</div></div>
                </div>
            </div>
            <div class="reg-items" >
              	<span class="reg-label">
                	<label for="phoneNumber">手机号码：</label>
              	</span>
                <input   class="i-text" type="text" id="phoneNumber" name="phoneNumber">
                <!--备注————display使用 inline-block-->
                <div class="msg-box">
                    <div class="msg-weak err-tips"  style="display:none;"><div>手机号不能为空</div></div>
                </div>
            </div>
            <div class="reg-items" >
              	<span class="reg-label">
                	<label for="email">邮箱号码：</label>
              	</span>
                <input   class="i-text" type="text" id="email" name="email">
                <div class="check check-border" style="position:relative;left:0">
                    <button class="check-phone" type="button" onclick="uptoCode()" style="padding:11px 10px 14px 10px;background-color:red;color: white" >邮箱验证</button>
                    <!--<a class="check-phone" style="padding:11px 10px 14px 10px;*line-height:60px;">获取短信验证码</a>-->
                    <!--<span class="check-phone disable" style="display: none;"><em>60</em>秒后重新获取</span>-->
                    <!--<a class="check-phone" style="display: none;padding:11px 10px 14px 10px">重新获取验证码</a>-->
                    <input  class="i-text i-short" type="text" id="checkcode" name="checkcode" required>
                </div>
                <!--备注————display使用 inline-block-->
                <div class="msg-box">
                    <div class="msg-weak err-tips"  style="display:none;"><div>请输入短信验证码</div></div>
                </div>
            </div>
            <div class="reg-items" >
                <div class="dag_biaod">
                    <input type="checkbox" value="english" >
                    阅读并同意
                    <a href="#" class="ftx-05 ml10">《MyShop用户注册协议》</a>
                    <a href="#" class="ftx-05 ml10">《隐私协议》</a>
                </div>
            </div>
            <div class="reg-items" >
                <!--<span class="reg-label">-->
                <!--<label for="J_Name"> </label>-->
                <!--</span>-->
                <button class="reg-btn"  type="submit">立即注册</button>
            </div>
        </form>
        <div class="xiaogg">
            <img src="images/cdsgfd.jpg">
        </div>
    </div>
</div>


<div class="jianj_dib jianj_dib_1">
    <div class="beia_hao">
        <p>京ICP备：123456789号  </p>
        <p class="gonga_bei">京公网安备：123456789号</p>
    </div>
</div>

</body>
<script type="text/javascript" src="jquery/jquery-2.1.1.min.js"></script>
<script type="text/javascript">
    var userName;
    var password;
    var phoneNumber;
    var email;
    function Register() {
        userName=$("#userName").val();
        password=$("#password").val();
        phoneNumber=$("#phoneNumber").val();
        email=$("#email").val();
        $.ajax({
            type: 'POST',
            url: "RegisterUser",
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify({
                "userName": userName,
                "password": password,
                "phoneNumber": phoneNumber,
                "email": email
            }),
            success: function (data) {
                alert(data);
                console.log(data);
                if (data == true) {
                    window.location.href = "login.html";
                }
            },
            error: function (data) {
                alert("信息出错");
                console.error(data);
                // window.location.href = "index.html";
            },
            dataType: "json"
        });
        return true;
    }
    $("#checkcode").blur(function () {
        var checkcode = $.trim($("#checkcode").val());
        if (code != checkcode) {
            alert("验证码错误")
        }
    });
    function uptoCode() {
        var email = $.trim($("#email").val());
        if (email != null && email != '') {
            $.ajax({
                url: "checkEmail",
                type: "POST",
                data: {
                    email: function () {
                        return email;
                    }
                },
                success: function (response) {
                    window.confirm("验证码已经发送至您邮箱,请查收，请勿重复提交!");
                    code = response;
                }
            })
        } else {
            alert("请先输入邮箱地址");
        }
    }
</script>
</html>
